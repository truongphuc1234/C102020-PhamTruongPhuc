<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html>
<script>
    let name = "Phạm Trường Phúc";
    let identity = "0123456789";
    let birthday = "1992-12-08";
    let email = "truongphucdn@gmail.com";
    let address = "Đà Nẵng";
    let customer = "diamond";
    let quantity = 4;
    let rentDay = 5;
    let service = "villa";
    let roomType = "business";
    while (1) {
        let choice = prompt("Menu\n" +
            "1. Show Information Customer.\n" +
            "2. Edit Information Customer.\n" +
            "3. Show the amount to be paid after discount.\n Chọn chức năng :");
        switch (choice) {
            case "1":
                alert("1. Họ và tên: " + name + "\n" +
                    "2. Số CMND: " + identity + "\n" +
                    "3. Ngày tháng năm sinh: " + birthday + "\n" +
                    "4. Email: " + email + "\n" +
                    "5. Địa chỉ: " + address + "\n" +
                    "6. Loại Customer: " + customer + "\n" +
                    "7. Số lượng đi kèm: " + quantity + "\n" +
                    "8. Số ngày thuê: " + rentDay + "\n" +
                    "9. Loại dịch vụ: " + service + "\n" +
                    "10. Loại phòng thuê: " + roomType);
                break;
            case "2": {
                alert("1. Họ và tên: " + name + "\n" +
                    "2. Số CMND: " + identity + "\n" +
                    "3. Ngày tháng năm sinh: " + birthday + "\n" +
                    "4. Email: " + email + "\n" +
                    "5. Địa chỉ: " + address + "\n" +
                    "6. Loại Customer: " + customer + "\n" +
                    "7. Số lượng đi kèm: " + quantity + "\n" +
                    "8. Số ngày thuê: " + rentDay + "\n" +
                    "9. Loại dịch vụ: " + service + "\n" +
                    "10. Loại phòng thuê: " + roomType);
                let choice_2 = prompt("Chọn thuộc tính cần điều chỉnh:\n" +
                    "1. Họ và tên: " + "\n" +
                    "2. Số CMND: " + "\n" +
                    "3. Ngày tháng năm sinh: " + "\n" +
                    "4. Email: " + "\n" +
                    "5. Địa chỉ: " + "\n" +
                    "6. Loại Customer: " + "\n" +
                    "7. Số lượng đi kèm: " + "\n" +
                    "8. Số ngày thuê: " + "\n" +
                    "9. Loại dịch vụ: " + "\n" +
                    "10. Loại phòng thuê: ");
                switch (choice_2) {
                    case "1":
                        do {
                            name = prompt("1. Họ và tên: ");
                        } while (!name);
                        let nameArr = name.split(/\s+/);
                        for (let i = 0; i < nameArr.length; i++) {
                            nameArr[i] = nameArr[i][0].toUpperCase() + nameArr[i].substr(1);
                        }
                        name = nameArr.join(" ");
                        break;
                    case "2":
                        let re_identity = /^[0-9]{8}$/;
                        do {
                            identity = prompt("2. Số CMND: ");
                        } while (!identity || !re_identity.test(identity));
                        break;
                    case "3":
                        let re_birthday = /^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/;
                        do {
                            birthday = prompt("3. Ngày tháng năm sinh: ");
                        } while (!birthday || !re_birthday.test(birthday));
                        break;
                    case "4":
                        let re_email = /^[A-Za-z0-9_]+@[A-Za-z0-9_]+\.[A-Za-z0-9_]+$/;
                        do {
                            email = prompt("4. Email: ");
                        } while (!email || !re_email.test(email));
                        break;
                    case "5":
                        do {
                            address = prompt("5. Địa chỉ: ");
                            address = address.split(/\s+/).join(" ");
                        } while (!address);
                        break;
                    case "6":
                        do {
                            customer = prompt("6. Loại Customer: \nDiamond, Platinum, Gold, Silver, Member")
                            customer = customer.toLowerCase().trim();
                        } while (customer !== "diamond" && customer !== "platinum" && customer !== "gold" && customer !== "silver" && customer !== "member")
                        break;
                    case "7":
                        do {
                            quantity = prompt("7. Số lượng đi kèm: ");
                        } while (!quantity || !/^[1-9]\d*$/.test(quantity))
                        quantity = parseInt(quantity);
                        break;
                    case "8":
                        do {
                            rentDay = prompt("8. Số ngày thuê: ");
                        } while (!rentDay || rentDay < 0)
                        break;
                    case "9":
                        do {
                            service = prompt("9. Loại dịch vụ: \n Villa, House, Room")
                            service = service.toLowerCase().trim();
                        } while (service !== "villa" && service !== "house" && service !== "room");
                        break;
                    case "10":
                        do {
                            roomType = prompt("10. Loại phòng thuê: \n Vip, Business,  Normal")
                            roomType = roomType.toLowerCase().trim();
                        } while (roomType !== "vip" && roomType !== "business" && roomType !== "normal");
                        break;
                    default:
                        alert("Fail");
                        break;
                }
                alert("1. Họ và tên: " + name + "\n" +
                    "2. Số CMND: " + identity + "\n" +
                    "3. Ngày tháng năm sinh: " + birthday + "\n" +
                    "4. Email: " + email + "\n" +
                    "5. Địa chỉ: " + address + "\n" +
                    "6. Loại Customer: " + customer + "\n" +
                    "7. Số lượng đi kèm: " + quantity + "\n" +
                    "8. Số ngày thuê: " + rentDay + "\n" +
                    "9. Loại dịch vụ: " + service + "\n" +
                    "10. Loại phòng thuê: " + roomType);
            }
                break;
            case "3":
                let price, discountByCity, discountByDays, discountByCustomer;
                switch (service) {
                    case "villa":
                        price = 500;
                        break;
                    case "house":
                        price = 200;
                        break;
                    case "room":
                        price = 100;
                        break;
                }
                switch (address) {
                    case "Đà Nẵng":
                        discountByCity = 20;
                        break;
                    case "Huế":
                        discountByCity = 10;
                        break;
                    case "Quảng Nam":
                        discountByCity = 5;
                        break;
                    default:
                        discountByCity = 0;
                        break;
                }
                if (rentDay >= 7)
                    discountByDays = 30;
                else if (rentDay >= 5)
                    discountByDays = 20;
                else if (rentDay >= 2)
                    discountByDays = 10;
                else
                    discountByDays = 0;

                switch (customer) {
                    case "diamond":
                        discountByCustomer = 15;
                        break;
                    case "platinum":
                        discountByCustomer = 10;
                        break;
                    case "gold":
                        discountByCustomer = 5;
                        break;
                    case "silver":
                        discountByCustomer = 2;
                        break;
                    default:
                        discountByCustomer = 0;
                        break;
                }
                let discount = discountByCity + discountByDays + discountByCustomer;
                let paid = price * rentDay - discount;

                alert("Số tiền giảm giá là : " + discount + "\n" + "Số tiền phải trả là :" + paid);
                break;
            default:
                alert("Bạn hãy chọn các chức năng có trong trình đơn");
        }
    }
</script>